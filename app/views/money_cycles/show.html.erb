<h2><%= @money_cycle.title %></h2>

<div id="cycle-summary">
  <%= render "summary", money_cycle: @money_cycle %>
</div>

<%= render "incomes/form",
      money_cycle: @money_cycle,
      income: @income %>

<%= render "expenses/form",
      money_cycle: @money_cycle,
      expense: @expense %>

<div id="expense-list">
  <%= render "expenses/expense_table",
        expenses: @expenses,
        money_cycle: @money_cycle %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const categorySelect = document.getElementById("category-select");
    const customField = document.getElementById("custom-category-field");

    function toggleCustomField() {
      if (categorySelect.value === "Others") {
        customField.style.display = "block";
      } else {
        customField.style.display = "none";
      }
    }

    toggleCustomField();
    categorySelect.addEventListener("change", toggleCustomField);
  });
</script>